if SHIELD_KEYPLAYER

config ZMK_KEYBOARD_NAME
    default "keyplayer"
      
endif

if ZMK_BACKLIGHT

config PWM
    default y

config LED_PWM
    default y

endif # ZMK_BACKLIGHT

menuconfig CHARGING_MONITOR
	bool "Charging Monitor"
	default y
	help
	  Enable charging state monitoring for battery-powered devices.

if CHARGING_MONITOR

config CHARGING_MONITOR_GPIO_PORT
	string "GPIO Port"
	default "gpio1"
	help
	  GPIO port name for CHRG pin (e.g., gpio1).

config CHARGING_MONITOR_GPIO_PIN
	int "GPIO Pin"
	default 9
	help
	  GPIO pin number for CHRG pin.

config CHARGING_MONITOR_POLL_CHARGING_MS
	int "Polling interval during charging (ms)"
	default 2000
	range 500 10000
	help
	  How often to check charging status when battery is charging.

config CHARGING_MONITOR_POLL_FULL_MS
	int "Polling interval when battery full (ms)"
	default 10000
	range 1000 60000
	help
	  How often to check charging status when battery is full.

config CHARGING_MONITOR_POLL_ERROR_MS
	int "Polling interval on error (ms)"
	default 30000
	range 5000 120000
	help
	  How often to retry when in error state.

config CHARGING_MONITOR_IDLE_TIMEOUT_MS
	int "Idle detection timeout (ms)"
	default 30000
	range 5000 300000
	help
	  Time without activity before considered idle.

config CHARGING_MONITOR_IDLE_MULTIPLIER
	int "Idle polling multiplier"
	default 2
	range 1 10
	help
	  Multiply polling interval by this factor when idle.

config CHARGING_MONITOR_MAX_ERRORS
	int "Maximum consecutive errors"
	default 5
	range 1 20
	help
	  Number of consecutive errors before attempting recovery.

config CHARGING_MONITOR_USE_ATOMIC
	bool "Use atomic operations for state"
	default y
	help
	  Use atomic operations for thread-safe state access.

config CHARGING_MONITOR_LOG_LEVEL
	int "Log level"
	default 2
	range 0 4
	help
	  Log level for charging monitor (0=off, 1=error, 2=warning, 3=info, 4=debug).

endif # CHARGING_MONITOR